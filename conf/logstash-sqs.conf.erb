# See http://logstash.net/docs/latest/ for documentation on how to configure Logstash.

input {

    sqs {
        access_key_id => "<%= ENV['AWS_ACCESS_KEY_ID'] %>"
        secret_access_key => "<%= ENV['AWS_SECRET_ACCESS_KEY'] %>"
        tags => ["<%= ENV['OPENSHIFT_APP_NAME'] %>", "<%= ENV['OPENSHIFT_GEAR_NAME'] %>", "<%= ENV['OPENSHIFT_NAMESPACE'] %>"]
        queue => "<%= ENV['AWS_SQS_QUEUE_NAME'] %>"
        codec => "json"
        threads => 1
        add_field => {}
    }
}

output {

    elasticsearch {
        codec => "json"
        host => "<%= ENV['OPENSHIFT_LOGSTASH_ES_HOST'] %>"
        idle_flush_time => 1
        protocol => "http"
        workers => 1
      }
}
